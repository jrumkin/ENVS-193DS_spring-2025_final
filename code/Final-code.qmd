---
title: "Final-code"
author: "Jessi Rumkin"
date: "June 7, 2025"
format:
  html:
    toc: true # to display a table of contents
execute:
  message: false # make sure messages don't show up
  warning: false # make sure warnings don't show up
---

link to GitHub repo: <https://github.com/jrumkin/ENVS-193DS_spring-2025_final>

# Set Up

```{r}
#read in packages
library(tidyverse)
library(janitor)
library(here) #for file management

#read in data used for assignment
sst <- read.csv(here("data", "SST_update2023.csv")) #using package 'here' to fix file path issue


```


# Problem 1. Research Writing

## a. Transparent statistical methods

In part 1 they used ((something to determine correlation between variables)). In part 2 they used ((something to determine if there is a difference in means between more than 2 groups)).

## b. More information needed ***

An additional piece of information that should be given is the type of t-test that was ran in both parts so the reader can use that to learn about the data type and assumptions made. 

An additional test that could be performed is a Cohen's d in order to quantify the effect size between groups. This increases data transparency and helps the reader understand the result. 

## c. Suggestions for rewriting

We found a **effect size** (Cohen's d = **Cohen's d value**) correlation between distance from headwater (km) and annual total nitrogen load (kg year^-1^) (**Type of t-test**, t(**degree of freedom**) = **t value**, p = 0.03, $\alpha$ = **significance level**). 

We found a **effect size** (Cohen's d = **Cohen's d value**) difference in average nitrogen load (kg year^-1^) (**Type of t-test**, t(**degree of freedom**) = **t value**, p = 0.02, $\alpha$ = **significance level**) between sources (urban land n = **group sample size**, atmospheric deposition n = **group sample size**, fertilizer n = **group sample size**, wastewater treatment n = **group sample size**, and grasslands n = **group sample size**).

# Problem 2. Data Visualzation

## a. Cleaning and summarizing 

Notes to myself on things that need to be done or be true abt the data table:
1. 72 rows total (this likley means each month has a row for all 6 years)
2. year data is factors not numbers
3. month data is ordinal factor data
4. the third column is mean sst (so I need to find the mean temp for each month in each year so like Aug 2018 is a different row than aug 2019)

```{r}

sst_clean <-  sst |> 
  mutate(date = ymd(date), #make the date column into year-month-date recognized data
         year = year(date), #make a new column of the year from the date column
         month = month(date)) |>  #make a new column of the month from the date column
  filter(year == c("2018", "2019", "2020", "2021", "2022", "2023")) |> #select only rows from those years 2018 - 2023
  select(year, month, temp) |> #select columns year, month, and temp
  group_by(year, month) |> #group the data by year and then month
  summarise(mean_monthly_sst = round((mean(temp, na.rm = TRUE)), 1)) |>  #calculate mean monthly sea surface temps in each month of each selected year
  mutate(year = as.factor(year)) |> #set year column as a factor
  mutate(month = factor(month.abb[month], #set the month column to factor using the abbreviated month names
                           levels = month.abb, #the levels of the ordinal factor are set my the month abbreviations
                           ordered = TRUE)) |>   #makes the factor ordinal
  ungroup() #ungroup the data to be worked with normally later
  
slice_sample(sst_clean, n = 5)  #display 5 random rows from sst_clean
str(sst_clean) #display sst_clean data structure


```


## b. Visualize the data

```{r}

sst_visual <- ggplot(data = sst_clean,
                     aes())


```



